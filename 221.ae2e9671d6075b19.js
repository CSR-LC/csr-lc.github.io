"use strict";(self.webpackChunklc_fe=self.webpackChunklc_fe||[]).push([[221],{3221:(z,u,o)=>{o.r(u),o.d(u,{MyApplicationsModule:()=>Q});var r=o(177),t=o(7705),M=o(1626);let d=(()=>{class i{static{this.ORDERS_BASE_URL="v1/orders"}constructor(e){this.http=e}getOrders(e="all",n=10,s=0){return this.http.get(`${i.ORDERS_BASE_URL}?status=${e}&limit=${n}&offset=${s}`)}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(M.Qq))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}}return i})();var S=o(6354),F=o(8141),C=o(7673);const $=[{id:1,name:"all",translation:"\u0412\u0441\u0435"},{id:2,name:"active",translation:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"},{id:3,name:"finished",translation:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"}];let h=(()=>{class i{getFilter(){return(0,C.of)(this.createFilter(this.createOptions()))}getId(){return"my-applications-filter"}createOptions(){return $.map(e=>({label:e.translation||e.name,value:e.name}))}createFilter(e){return{id:this.getId(),label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c",options:e}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}}return i})();var A=o(3269);let f=(()=>{class i{constructor(){this.itemsSignal=(0,t.vPA)([]),this.loadingSignal=(0,t.vPA)(!1),this.hasMoreSignal=(0,t.vPA)(!0),this.items$=(0,t.EWP)(()=>this.itemsSignal()),this.loading$=(0,t.EWP)(()=>this.loadingSignal()),this.hasMore$=(0,t.EWP)(()=>this.hasMoreSignal())}get loading(){return this.loadingSignal()}get hasMore(){return this.hasMoreSignal()}get items(){return this.itemsSignal()}setLoading(e){this.loadingSignal.set(e)}setHasMore(e){this.hasMoreSignal.set(e)}addItems(e){const n=this.itemsSignal();this.itemsSignal.set([...n,...e])}reset(){this.itemsSignal.set([]),this.hasMoreSignal.set(!0)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}}return i})();var I=o(9079);let m=(()=>{class i{constructor(){this.destroyRef=(0,t.WQX)(t.abz),this.api=(0,t.WQX)(d),this.headerService=(0,t.WQX)(A.j),this.infiniteScrollService=(0,t.WQX)(f),this.filterProvider=(0,t.WQX)(h),this.applications$=this.infiniteScrollService.items$,this.hasMore$=this.infiniteScrollService.hasMore$,this.loading$=this.infiniteScrollService.loading$}getApplications(e="all",n=10,s=0){return this.api.getOrders(e,n,s).pipe((0,S.T)(l=>l.items))}loadMoreApplications(e="all",n=10){if(this.infiniteScrollService.loading||!this.infiniteScrollService.hasMore)return;const s=this.infiniteScrollService.items.length;this.infiniteScrollService.setLoading(!0),this.getApplications(e,n,s).pipe((0,F.M)(l=>{this.infiniteScrollService.addItems(l),this.infiniteScrollService.setLoading(!1),this.infiniteScrollService.setHasMore(l.length>0)}),(0,I.pQ)(this.destroyRef)).subscribe({error:()=>{this.infiniteScrollService.setLoading(!1)}})}resetApplications(){this.infiniteScrollService.reset()}getFilter(){return this.filterProvider.getFilter()}setPageTitle(){this.headerService.setPageTitle("\u041c\u043e\u0438 \u0437\u0430\u044f\u0432\u043a\u0438")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}}return i})();var p=o(9329);let D=(()=>{class i{constructor(){this.scrolled=new t.bkB,this.threshold=100}onScroll(e){const n=e.target;n.scrollHeight-n.scrollTop-n.clientHeight<=this.threshold&&this.scrolled.emit()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=t.FsC({type:i,selectors:[["","lcInfiniteScroll",""]],hostBindings:function(n,s){1&n&&t.bIt("scroll",function(w){return s.onScroll(w)})},inputs:{threshold:"threshold"},outputs:{scrolled:"scrolled"}})}}return i})();var x=o(1997),E=o(9873),g=o(9183);let y=(()=>{class i{constructor(){this.diameter=100,this.strokeWidth=10}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["lc-loader"]],inputs:{diameter:"diameter",strokeWidth:"strokeWidth"},standalone:!0,features:[t.aNF],decls:1,vars:2,consts:[[3,"diameter","strokeWidth"]],template:function(n,s){1&n&&t.nrm(0,"mat-spinner",0),2&n&&t.Y8G("diameter",s.diameter)("strokeWidth",s.strokeWidth)},dependencies:[r.MD,g.D6,g.LG],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;height:100%}"],changeDetection:0})}}return i})();var P=o(1635),O=o(1473),j=o(3487),T=o(8428),v=o(8834),R=o(9213);const _=function(i,a){return[i,a]};function G(i,a){if(1&i&&(t.j41(0,"article",1)(1,"a",2)(2,"div",3)(3,"button",4),t.EFF(4),t.k0s(),t.j41(5,"span",5),t.EFF(6),t.nI1(7,"date"),t.nI1(8,"date"),t.k0s()(),t.j41(9,"div",6)(10,"div",7)(11,"p",8),t.EFF(12),t.k0s(),t.j41(13,"p",9),t.EFF(14),t.k0s()(),t.j41(15,"button",10)(16,"mat-icon",11),t.EFF(17,"keyboard_arrow_right"),t.k0s()()()()()),2&i){const e=a.ngIf,n=t.XpG();t.R7$(1),t.Y8G("routerLink",t.l_i(12,_,n.route,n.application.id)),t.R7$(3),t.SpI(" ",n.getStatus(e,n.application.last_status.status)," "),t.R7$(2),t.Lme("\u043d\u0430 \u043f\u0435\u0440\u0438\u043e\u0434 ",t.i5U(7,6,n.application.rent_start,"dd.MM.yy")," \u2014 ",t.i5U(8,9,n.application.rent_end,"dd.MM.yy"),""),t.R7$(6),t.JRh(n.application.equipments[0].name),t.R7$(2),t.JRh(n.application.equipments[0].title)}}class c{constructor(){this.route=`/${O.S.MyApplications}`}getStatus(a,e){return a.find(n=>n.name===e)?.translation??""}static{this.\u0275fac=function(e){return new(e||c)}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["lc-my-application"]],inputs:{application:"application"},decls:2,vars:3,consts:[["class","my-application",4,"ngIf"],[1,"my-application"],[1,"my-application__link",3,"routerLink"],[1,"my-application__header"],["mat-button","","color","primary",1,"my-application__status"],[1,"my-application__period"],[1,"my-application__body"],[1,"my-application__text"],[1,"my-application__title"],[1,"my-application__description"],["mat-icon-button",""],[1,"my-application__icon"]],template:function(e,n){1&e&&(t.DNE(0,G,18,15,"article",0),t.nI1(1,"async")),2&e&&t.Y8G("ngIf",t.bMT(1,1,n.application&&n.applicationStatuses$))},dependencies:[r.bT,p.Wk,v.$z,v.iY,R.An,r.Jj,r.vh],styles:[".my-application__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.my-application__body[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.my-application__text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.my-application__text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.my-application__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#005f75;font-size:32px}.my-application__period[_ngcontent-%COMP%], .my-application__description[_ngcontent-%COMP%]{color:#656565}.my-application__title[_ngcontent-%COMP%]{font-weight:700;color:#005f75}.my-application__status[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #CFDBE5;border-radius:16px;padding:6px 12px}.my-application__link[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;text-decoration:none}"],changeDetection:0})}}(0,P.Cg)([(0,j.l6)(T.WZ.applicationStatuses)],c.prototype,"applicationStatuses$",void 0);let k=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["lc-my-application-details"]],decls:2,vars:0,template:function(n,s){1&n&&(t.j41(0,"p"),t.EFF(1,"my-application-details works!"),t.k0s())},changeDetection:0})}}return i})();function W(i,a){if(1&i){const e=t.RV6();t.j41(0,"lc-dropdown-filter",6),t.bIt("selectionChange",function(s){t.eBV(e);const l=t.XpG();return t.Njj(l.applyFilter(s))}),t.k0s()}if(2&i){const e=a.ngIf;t.Y8G("label","\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c")("options",e.options)}}function B(i,a){1&i&&t.nrm(0,"mat-divider")}function L(i,a){if(1&i&&(t.j41(0,"div",7),t.nrm(1,"lc-my-application",8),t.DNE(2,B,1,0,"mat-divider",9),t.k0s()),2&i){const e=a.$implicit,n=a.last;t.R7$(1),t.Y8G("application",e),t.R7$(1),t.Y8G("ngIf",!n)}}function b(i,a){1&i&&(t.qex(0),t.nrm(1,"lc-loader"),t.bVm())}function H(i,a){1&i&&(t.j41(0,"p",11),t.EFF(1,"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430."),t.k0s())}function Y(i,a){if(1&i&&t.DNE(0,H,2,0,"p",10),2&i){const e=t.XpG();t.Y8G("ngIf",0===e.applications$().length)}}const N=[{path:"",component:(()=>{class i{constructor(e){this.controller=e,this.applications$=this.controller.applications$,this.loading$=this.controller.loading$,this.hasMore$=this.controller.hasMore$,this.filter$=this.controller.getFilter(),this.currentFilter=""}ngOnInit(){this.controller.loadMoreApplications(),this.controller.setPageTitle()}applyFilter(e){this.currentFilter=e,this.controller.resetApplications(),this.controller.loadMoreApplications(this.currentFilter)}trackMyApplication(e,n){return n.id}loadMore(){this.controller.loadMoreApplications(this.currentFilter)}ngOnDestroy(){this.controller.resetApplications()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(m))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["lc-my-applications"]],decls:8,vars:7,consts:[["lcInfiniteScroll","",1,"my-applications-container",3,"scrolled"],[3,"label","options","selectionChange",4,"ngIf"],[1,"my-applications-list"],["class","my-application-container",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf","ngIfElse"],["noApplicationsMessage",""],[3,"label","options","selectionChange"],[1,"my-application-container"],[3,"application"],[4,"ngIf"],["class","no-applications-message",4,"ngIf"],[1,"no-applications-message"]],template:function(n,s){if(1&n&&(t.j41(0,"div",0),t.bIt("scrolled",function(){return s.loadMore()}),t.DNE(1,W,1,2,"lc-dropdown-filter",1),t.nI1(2,"async"),t.j41(3,"section",2),t.DNE(4,L,3,2,"div",3),t.DNE(5,b,2,0,"ng-container",4),t.k0s()(),t.DNE(6,Y,1,1,"ng-template",null,5,t.C5r)),2&n){const l=t.sdS(7);t.R7$(1),t.Y8G("ngIf",t.bMT(2,5,s.filter$)),t.R7$(3),t.Y8G("ngForOf",s.applications$())("ngForTrackBy",s.trackMyApplication),t.R7$(1),t.Y8G("ngIf",s.loading$())("ngIfElse",l)}},dependencies:[r.Sq,r.bT,D,x.q,E.z,y,c,r.Jj],styles:[".my-applications-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:40px;padding:24px;height:100%;overflow:auto}.my-applications-list[_ngcontent-%COMP%], .my-application-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.no-applications-message[_ngcontent-%COMP%]{text-align:center;color:#656565}"],changeDetection:0})}}return i})()},{path:":id",component:k}];let U=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[p.iI.forChild(N),p.iI]})}}return i})();var X=o(2201),V=o(8736);let Q=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({providers:[d,m,h,f],imports:[r.MD,U,X.G,V.zt,y]})}}return i})()}}]);