"use strict";(self.webpackChunklc_fe=self.webpackChunklc_fe||[]).push([[791],{1791:(Pe,E,r)=>{r.r(E),r.d(E,{CatalogModule:()=>qe});var u=r(9808),g=r(5089),m=r(7582),b=r(520),e=r(5e3);let M=(()=>{class n{constructor(t){this.httpClient=t}info(t){return this.httpClient.get(`equipment/${t}`)}getCatalog(){const t=(new b.LE).set("limit",1e3);return this.httpClient.get("equipment",{params:t})}searchEquipment(t){return this.httpClient.post("equipment/search",t)}getPhotoById(t){return this.httpClient.get(`equipment/photos/${t}`,{responseType:"arraybuffer"})}getCategoriesContainEquipment(){const t=(new b.LE).set("limit",1e3).set("has_equipments","true");return this.httpClient.get("equipment/categories",{params:t})}filterEquipmentByCategory(t){return this.httpClient.post("equipment/search",t)}getUnavailablePeriods(t){return this.httpClient.get(`equipment/unavailability_periods/${t}`)}getCreatedOrder(t){return this.httpClient.post("v1/orders",t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(b.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var d=r(2642),w=r(4004),p=r(9646),h=r(3900);let D=(()=>{class n{constructor(t){this.catalog=t}}return n.type="[Catalog] Get",n})(),c=class{static catalog(o){return o.equipments}getCatalogAction(o,t){o.setState({equipments:t.catalog})}};c.\u0275fac=function(o){return new(o||c)},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac}),(0,m.gn)([(0,d.aU)(D)],c.prototype,"getCatalogAction",null),(0,m.gn)([(0,d.Qf)()],c,"catalog",null),c=(0,m.gn)([(0,d.ZM)({name:"catalog",defaults:{equipments:[]}})],c);var v=r(1794),O=r(3075),q=r(6856),x=r(8966),Z=r(5245),P=r(7423);function R(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1," - "),e.qZA())}function S(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().resetSelectedPeriod()}),e._uU(1," \u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0435\u0440\u0438\u043e\u0434 "),e.qZA()}}let U=(()=>{class n{constructor(t){this.dateRangeData=t,this.maxRentalPeriod=this.dateRangeData.maxRentalPeriod,this.currentDay=(new Date).getDate(),this.currentMonth=(new Date).getMonth(),this.currentYear=(new Date).getFullYear(),this.dateRangeForm=new O.cw({fromDate:new O.NI(null),toDate:new O.NI(null)}),this.minDate=new Date,this.maxDate=new Date(this.currentYear+1,this.currentMonth,this.currentDay-1),this.unavailableDates=this.dateRangeData.unavailableDates,this.isDateUnavailable=i=>{const a=this.removeTime(i);return!this.unavailableDates||!this.unavailableDates.find(s=>this.removeTime(s.start_date)<=a&&this.removeTime(s.end_date)>=a)}}selectedDateRange(t){var i,a;if(!t)return;const s=this.getUTCTime(t);if(!(null===(i=this.selectedRangeValue)||void 0===i?void 0:i.start)||(null===(a=this.selectedRangeValue)||void 0===a?void 0:a.end))return this.setStartDate(s);if(!s)return;if(s<this.selectedRangeValue.start)return this.setStartDate(s);const _=new Date(this.selectedRangeValue.start);if(_.setDate(_.getDate()+this.maxRentalPeriod-1),!this.isPeriodAvailable(this.selectedRangeValue.start,s))return this.setStartDate(s);this.selectedRangeValue=new q.C0(this.selectedRangeValue.start,s)}getSelectedRentalDate(t){if((null==t?void 0:t.start)&&t.end)return{end_date:t.end.toISOString(),start_date:t.start.toISOString()}}resetSelectedPeriod(){this.maxDate=new Date(this.currentYear+1,this.currentMonth,this.currentDay-1),this.selectedRangeValue=new q.C0(null,null)}removeTime(t){return new Date(t).setHours(0,0,0,0)}getUTCTime(t){const i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return new Date(i)}isPeriodAvailable(t,i){if(!this.unavailableDates)return!0;for(let a=0;a<this.unavailableDates.length;a++)if(new Date(this.unavailableDates[a].start_date)>t&&new Date(this.unavailableDates[a].end_date)<i)return!1;return!0}setStartDate(t){this.selectedRangeValue=new q.C0(t,null),this.setMaxDate(t)}setMaxDate(t){if(t>new Date(this.currentYear+1,this.currentMonth,this.currentDay-this.maxRentalPeriod))return;const a=new Date(t);a.setDate(a.getDate()+this.maxRentalPeriod-1),this.maxDate=new Date(a)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lc-date-range"]],inputs:{selectedRangeValue:"selectedRangeValue"},decls:22,vars:18,consts:[[1,"date-range"],[1,"date-range-header"],[1,"date-range-title"],[1,"icon",3,"mat-dialog-close"],[1,"date-range-calendar"],[1,"date-range-calendar-card"],[1,"date-period"],[1,"period"],[4,"ngIf"],["mat-flat-button","","class","reset-period",3,"click",4,"ngIf"],[3,"dateFilter","minDate","maxDate","selected","selectedChange"],[1,"date-range-button"],["mat-raised-button","","color","primary","type","button",1,"button-confirm",3,"mat-dialog-close"],["mat-flat-button","",1,"reset-period",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"mat-icon",3),e._uU(5,"close"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"span"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.YNc(13,R,2,0,"span",8),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"date"),e.qZA()(),e.YNc(17,S,2,0,"button",9),e.qZA(),e.TgZ(18,"mat-calendar",10),e.NdJ("selectedChange",function(s){return i.selectedDateRange(s)}),e.qZA()()(),e.TgZ(19,"div",11)(20,"button",12),e._uU(21),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(i.dateRangeData.headerText),e.xp6(1),e.Q6J("mat-dialog-close",!1),e.xp6(7),e.Oqu(e.xi3(12,12,null==i.selectedRangeValue?null:i.selectedRangeValue.start,"dd.MM.yyyy")),e.xp6(2),e.Q6J("ngIf",null==i.selectedRangeValue?null:i.selectedRangeValue.start),e.xp6(2),e.Oqu(e.xi3(16,15,null==i.selectedRangeValue?null:i.selectedRangeValue.end,"dd.MM.yyyy")),e.xp6(2),e.Q6J("ngIf",(null==i.selectedRangeValue?null:i.selectedRangeValue.start)&&(null==i.selectedRangeValue?null:i.selectedRangeValue.end)),e.xp6(1),e.Q6J("dateFilter",i.isDateUnavailable)("minDate",i.minDate)("maxDate",i.maxDate)("selected",i.selectedRangeValue),e.xp6(2),e.Q6J("mat-dialog-close",i.getSelectedRentalDate(i.selectedRangeValue)),e.xp6(1),e.hij(" ",i.dateRangeData.buttonText," "))},directives:[Z.Hw,x.ZT,u.O5,P.lW,q._H],pipes:[u.uU],styles:[".date-range-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 24px 0;font-size:20px}.date-range-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{cursor:pointer}.date-range-title[_ngcontent-%COMP%]{margin:0}.date-range-calendar[_ngcontent-%COMP%]{display:flex;margin:0 auto;justify-content:center;padding-top:17px}.date-range-calendar-card[_ngcontent-%COMP%]{background:#F7F7F7}.date-range-calendar[_ngcontent-%COMP%]   .date-period[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:9px 9px 0}.date-range-calendar[_ngcontent-%COMP%]   .date-period[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{font-weight:500;font-size:16px;height:20px}.date-range-calendar[_ngcontent-%COMP%]   .date-period[_ngcontent-%COMP%]   .reset-period[_ngcontent-%COMP%]{height:20px;font-size:14px;display:flex;align-items:center;padding:0;font-size:16px}.date-range-button[_ngcontent-%COMP%]{display:flex;margin:0 auto;padding:24px;justify-content:center;flex-direction:column;align-items:center}.date-range-button[_ngcontent-%COMP%]   .button-confirm[_ngcontent-%COMP%]{height:56px;padding:0 16px;border-radius:10px;text-transform:uppercase;letter-spacing:1.2px;width:100%;font-weight:400;background-color:#005f75;color:#fff}.date-range[_ngcontent-%COMP%]   .mat-calendar[_ngcontent-%COMP%]{width:360px;height:405px}"],changeDetection:0}),n})(),k=(()=>{class n{constructor(t){this.dialog=t}openDateRangeModal(t){return this.dialog.open(U,{data:t,width:"390px",maxWidth:"390px",autoFocus:!1,position:{bottom:"0px"}}).afterClosed().pipe((0,h.w)(i=>(0,p.of)(i||null)))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(x.uw))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var L=r(9152);function Y(n,o){if(1&n&&(e.TgZ(0,"a",10),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.infoData.infoLink," ")}}function N(n,o){if(1&n&&(e.TgZ(0,"button",11),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",t.infoData.buttonCancelText," ")}}let J=(()=>{class n{constructor(t){this.infoData=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lc-info-modal"]],decls:14,vars:7,consts:[[1,"info-modal"],[1,"info-modal-header"],[1,"title"],[1,"icon",3,"mat-dialog-close"],[1,"info-modal-container"],[1,"message"],["class","link",4,"ngIf"],[1,"info-modal-buttons"],["mat-raised-button","","color","primary","class","button-cancel","type","button",3,"mat-dialog-close",4,"ngIf"],["mat-raised-button","","color","primary","type","button",1,"button-confirm",3,"mat-dialog-close"],[1,"link"],["mat-raised-button","","color","primary","type","button",1,"button-cancel",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"mat-icon",3),e._uU(5,"close"),e.qZA()(),e.TgZ(6,"div",4)(7,"p",5),e._uU(8),e.qZA(),e.YNc(9,Y,2,1,"a",6),e.qZA(),e.TgZ(10,"div",7),e.YNc(11,N,2,2,"button",8),e.TgZ(12,"button",9),e._uU(13),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(i.infoData.headerText),e.xp6(1),e.Q6J("mat-dialog-close",!1),e.xp6(4),e.hij(" ",i.infoData.infoMessage," "),e.xp6(1),e.Q6J("ngIf",i.infoData.infoLink),e.xp6(2),e.Q6J("ngIf",i.infoData.buttonCancelText),e.xp6(1),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.hij(" ",i.infoData.buttonOkText," "))},directives:[Z.Hw,x.ZT,u.O5,P.lW],styles:[".info-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0}.info-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #CFDBE5;padding:24px 24px 17px;height:81px}.info-modal-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0}.info-modal-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{cursor:pointer}.info-modal-container[_ngcontent-%COMP%]{font-size:16px;font-weight:400;line-height:24px;letter-spacing:.5px;margin:24px 24px 8px}.info-modal-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:inline;color:#656565;white-space:pre-line}.info-modal-container[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#005f75;text-decoration:underline;cursor:pointer;white-space:pre-line}.info-modal-buttons[_ngcontent-%COMP%]{gap:20px;display:flex;justify-content:space-between;margin:24px}.info-modal-buttons[_ngcontent-%COMP%]   .button-cancel[_ngcontent-%COMP%], .info-modal-buttons[_ngcontent-%COMP%]   .button-confirm[_ngcontent-%COMP%]{text-transform:uppercase;height:56px;width:100%;letter-spacing:1.25px;font-weight:400;border-radius:10px}"],changeDetection:0}),n})(),B=(()=>{class n{constructor(t){this.dialog=t}openInfoModal(t){return this.dialog.open(J,{data:t,width:"390px",maxWidth:"390px",autoFocus:!1,position:{bottom:"0px"}}).afterClosed().pipe((0,h.w)(i=>(0,p.of)("boolean"==typeof i?i:null)))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(x.uw))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class l{constructor(o,t,i,a,s){this.api=o,this.store=t,this.dateRangeService=i,this.personalInfoService=a,this.infoService=s}getCatalog(){this.api.getCatalog().subscribe(o=>{this.store.dispatch(new D(o.items))})}getEquipmentItemInfo(o){return this.api.info(o)}searchEquipment(o){return this.api.searchEquipment({name_substring:o}).pipe((0,w.U)(i=>i.items))}getPhotoById(o){return this.api.getPhotoById(o).pipe((0,w.U)(t=>new Blob([t],{type:"image/jpeg"})))}filterEquipmentByCategory(o){this.api.filterEquipmentByCategory({category:o}).subscribe(i=>{this.store.dispatch(new D(i.items))})}getRentPeriods(o,t){return t?this.api.getUnavailablePeriods(o).pipe((0,h.w)(i=>this.dateRangeService.openDateRangeModal({headerText:"\u041f\u0435\u0440\u0438\u043e\u0434 \u0430\u0440\u0435\u043d\u0434\u044b",buttonText:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0435\u0440\u0438\u043e\u0434 \u0430\u0440\u0435\u043d\u0434\u044b",maxRentalPeriod:t,unavailableDates:i.items}))):(0,p.of)(null)}orderEquipment(o,t){return this.api.getCreatedOrder({description:"description",equipment_id:t,rent_end:o.end_date,rent_start:o.start_date})}updateUserPersonalInfo(){return this.personalInfoService.updateUserPersonalInfo()}setUser(o){return this.store.dispatch(new v.Vw(o))}openInfoModal(){this.infoService.openInfoModal({headerText:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e!",infoMessage:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0437\u0430\u044f\u0432\u043a\u0443 \u043d\u0430 \u0430\u0440\u0435\u043d\u0434\u0443 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f. \u041d\u0430\u0448\u0438 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u044b \u0441\u043a\u043e\u0440\u043e \u0441\u0432\u044f\u0436\u0443\u0442\u0441\u044f \u0441 \u0412\u0430\u043c\u0438.\n      \u0418\u0441\u0442\u043e\u0440\u0438\u044e \u0438 \u0441\u0442\u0430\u0442\u0443\u0441 \u0432\u0430\u0448\u0438\u0445 \u0437\u0430\u044f\u0432\u043e\u043a \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435",buttonOkText:"\u041e\u043a",infoLink:"\u041c\u043e\u0438\n      \u0437\u0430\u044f\u0432\u043a\u0438"})}addPersonalInfo(o){return o?this.hasUserPesonalData$.pipe((0,h.w)(t=>t?(0,p.of)(null):this.personalInfoService.openPersonalInfoModal()),(0,h.w)(()=>this.hasUserPesonalData$),(0,h.w)(t=>(0,p.of)(t?o:null))):(0,p.of)(null)}}l.\u0275fac=function(o){return new(o||l)(e.LFG(M),e.LFG(d.yh),e.LFG(k),e.LFG(L.Q),e.LFG(B))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac}),(0,m.gn)([(0,d.Ph)(c.catalog)],l.prototype,"catalog$",void 0),(0,m.gn)([(0,d.Ph)(v.jq.hasUserPesonalData)],l.prototype,"hasUserPesonalData$",void 0);var y=r(5485),T=r(9965);const Q={has_subcategory:!1,id:0,max_reservation_time:0,max_reservation_units:0,name:"\u0412\u0441\u0435"};let z=(()=>{class n{transform(t){return(null==t?void 0:t.id)?`/catalog/categories/${t.id}`:"/catalog"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"categoryPath",type:n,pure:!0}),n})(),$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["lc-category-tab"]],inputs:{item:"item"},decls:3,vars:4,consts:[[1,"category-equipment-button",3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"a",0),e.ALo(1,"categoryPath"),e._uU(2),e.qZA()),2&t&&(e.s9C("routerLink",e.lcZ(1,2,i.item)),e.xp6(2),e.Oqu(null==i.item?null:i.item.name))},directives:[g.yS],pipes:[z],styles:["[_nghost-%COMP%]{flex:1 1 auto}.category-equipment-button[_ngcontent-%COMP%]{display:flex;align-items:center;color:#fff;background:transparent;border:none;border-radius:6px;row-gap:10px;height:35px;font-size:14px;font-weight:400;line-height:20px;padding:6px 12px;width:-moz-fit-content;width:fit-content;white-space:nowrap;cursor:pointer;text-decoration:none}"],changeDetection:0}),n})();const j=["listCategories"],G=["categoryElement"];function V(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5,6),e.NdJ("click",function(){const s=e.CHM(t).$implicit,_=e.MAs(1);return e.oxw().scrollCategories(s.id,_)}),e._UZ(2,"lc-category-tab",7),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw();e.ekj("active",i.selectedCategoryId===t.id),e.s9C("id",t.id),e.xp6(2),e.Q6J("item",t)}}let H=(()=>{class n{constructor(t){this.route=t,this.categories=[],this.selectedCategoryId=Number(this.route.snapshot.params.categoryId),this.marginLeft=25}ngOnInit(){this.selectedCategoryId||(this.selectedCategoryId=0),this.categories=[Q,...this.route.snapshot.data.activeCategories]}ngAfterViewInit(){if(!this.categoriesElements)return;const t=this.categoriesElements.find(a=>a.nativeElement.classList.contains("active"));if(!t)return;const i=t.nativeElement.getBoundingClientRect().x;this.scroll(i)}scrollCategories(t,i){if(this.selectedCategoryId=t,!this.listCategories)return;const a=i.getBoundingClientRect().x;this.scroll(this.listCategories.nativeElement.scrollLeft+a)}scroll(t){!this.listCategories||this.listCategories.nativeElement.scroll({left:t-this.marginLeft,behavior:"smooth"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lc-category-set"]],viewQuery:function(t,i){if(1&t&&(e.Gf(j,5),e.Gf(G,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.listCategories=a.first),e.iGM(a=e.CRH())&&(i.categoriesElements=a)}},decls:5,vars:1,consts:[[1,"category-equipment"],["listCategories",""],[1,"category-equipment-list"],["list",""],["class","category-equipment-item",3,"active","id","click",4,"ngFor","ngForOf"],[1,"category-equipment-item",3,"id","click"],["categoryElement",""],[3,"item"]],template:function(t,i){1&t&&(e.TgZ(0,"section",0,1)(2,"div",2,3),e.YNc(4,V,3,4,"div",4),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngForOf",i.categories))},directives:[u.sg,$],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column nowrap;flex:1 1 auto;overflow-x:hidden}.category-equipment[_ngcontent-%COMP%]{display:flex;height:100%;padding:25px;overflow-x:scroll;scroll-snap-type:x mandatory}.category-equipment-list[_ngcontent-%COMP%]{display:flex;gap:10px}.category-equipment-item[_ngcontent-%COMP%]{background:#4D8F9E;border-radius:6px}.active[_ngcontent-%COMP%]{background:#005F75}[_ngcontent-%COMP%]::-webkit-scrollbar{height:0px}@media (min-width: 890px){.category-equipment-list[_ngcontent-%COMP%]{flex-wrap:wrap}}"],changeDetection:0}),n})();var I=r(7322),X=r(7531);let W=(()=>{class n{constructor(){this.search=new e.vpe}onSearch(t){this.search.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["lc-catalog-search"]],outputs:{search:"search"},decls:9,vars:0,consts:[[1,"search-form"],["appearance","outline"],["matInput","","type","text","maxlength","100","placeholder","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443",3,"keydown.enter"],["searchBox",""],["matSuffix","","type","button","mat-icon-button","",3,"click"]],template:function(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),e._uU(3,"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443"),e.qZA(),e.TgZ(4,"input",2,3),e.NdJ("keydown.enter",function(_){e.CHM(a);const F=e.MAs(5);return i.onSearch(F.value),_.preventDefault()}),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){e.CHM(a);const _=e.MAs(5);return i.onSearch(_.value)}),e.TgZ(7,"mat-icon"),e._uU(8,"search"),e.qZA()()()()}},directives:[I.KE,I.hX,X.Nt,P.lW,I.R9,Z.Hw],styles:["[_nghost-%COMP%]{display:block}.search-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin:20px 0;width:100%}"]}),n})();const K=["image"];let ee=(()=>{class n{constructor(t){this.controller=t,this.defaultImage="./assets/img/no-photo.png"}ngOnInit(){this.controller.getPhotoById(this.equipment.photoID).subscribe(t=>{const a=(window.URL||window.webkitURL).createObjectURL(t);!this.image||(this.image.nativeElement.src=a)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lc-preview-equipment-card"]],viewQuery:function(t,i){if(1&t&&e.Gf(K,5),2&t){let a;e.iGM(a=e.CRH())&&(i.image=a.first)}},inputs:{equipment:"equipment"},features:[e._Bn([l])],decls:8,vars:5,consts:[[1,"equipment-card"],[1,"equipment-card__img",3,"routerLink"],["alt","equipment photo",1,"img",3,"src"],["image",""],[1,"equipment-card__title",3,"routerLink"],[1,"equipment-card__info"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"img",2,3),e.qZA(),e.TgZ(4,"a",4),e._uU(5),e.qZA(),e.TgZ(6,"p",5),e._uU(7),e.qZA()()),2&t&&(e.xp6(1),e.MGl("routerLink","/catalog/equipment/",i.equipment.id,""),e.xp6(1),e.Q6J("src",i.defaultImage,e.LSH),e.xp6(2),e.MGl("routerLink","/catalog/equipment/",i.equipment.id,""),e.xp6(1),e.hij(" ",i.equipment.name," "),e.xp6(2),e.Oqu(i.equipment.description))},directives:[g.yS],styles:["[_nghost-%COMP%]{display:flex;height:100%}.equipment-card[_ngcontent-%COMP%]{align-items:flex-start;display:flex;flex-flow:column nowrap;justify-content:flex-start;width:100%}.equipment-card__img[_ngcontent-%COMP%]{border-radius:10px;display:block;min-height:160px;width:100%}.equipment-card__img[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{border-radius:10px;display:block;margin:0;width:100%}.equipment-card__title[_ngcontent-%COMP%]{color:#005f75;font-size:14px;font-weight:700;line-height:15px;margin:10px 5px 5px;text-decoration:none}.equipment-card__info[_ngcontent-%COMP%]{color:#b3b3b3;flex:1 1 auto;font-size:13px;line-height:15px;margin:0 5px 10px}"],changeDetection:0}),n})();function te(n,o){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"lc-preview-equipment-card",4),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("equipment",t)}}let C=class{constructor(o,t,i){this.controller=o,this.mainPageHeaderService=t,this.route=i,this.catalog$=this.controller.catalog$,t.setPageTitle("\u041a\u0430\u0442\u0430\u043b\u043e\u0433")}ngOnInit(){this.route.params.pipe((0,y.t)(this)).subscribe(o=>{o.categoryId?this.controller.filterEquipmentByCategory(Number(o.categoryId)):this.controller.getCatalog()})}onSearch(o){this.catalog$=this.controller.searchEquipment(o)}};C.\u0275fac=function(o){return new(o||C)(e.Y36(l),e.Y36(T.I),e.Y36(g.gz))},C.\u0275cmp=e.Xpm({type:C,selectors:[["lc-catalog"]],features:[e._Bn([l])],decls:6,vars:3,consts:[[1,"catalog"],[3,"search"],[1,"catalog-list"],[4,"ngFor","ngForOf"],[3,"equipment"]],template:function(o,t){1&o&&(e._UZ(0,"lc-category-set"),e.TgZ(1,"section",0)(2,"lc-catalog-search",1),e.NdJ("search",function(a){return t.onSearch(a)}),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,te,2,1,"div",3),e.ALo(5,"async"),e.qZA()()),2&o&&(e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,t.catalog$)))},directives:[H,W,u.sg,ee],pipes:[u.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column nowrap;flex:1 1 auto}.catalog[_ngcontent-%COMP%]{background:#ffffff;border-radius:30px;height:100%;padding:28px}.catalog-list[_ngcontent-%COMP%]{display:grid;grid-gap:20px;grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}"],changeDetection:0}),C=(0,m.gn)([y.c],C);const ne={nominativeSingular:"\u0434\u0435\u043d\u044c",genitiveSingular:"\u0434\u043d\u044f",genitivePlural:"\u0434\u043d\u0435\u0439"};var ie=r(2114),oe=r(5186);let ae=(()=>{class n{transform(t,i){if(null==i||i<0)return"";const a=i>19?this.getLastNumber(i):i;return 0===a?`${i} ${t.empty||t.genitivePlural}`:1===a?`${i} ${t.nominativeSingular}`:a>=2&&a<=4?`${i} ${t.genitiveSingular}`:`${i} ${t.genitivePlural}`}getLastNumber(t){const i=String(t);return Number(i.charAt(i.length-1))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"numberDeclension",type:n,pure:!0}),n})();const re=["image"];function se(n,o){if(1&n&&(e.TgZ(0,"p",17),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.equipment?null:t.equipment.description," ")}}function le(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"p",19),e._uU(2,"\u041f\u0435\u0440\u0438\u043e\u0434 \u0430\u0440\u0435\u043d\u0434\u044b:"),e.qZA(),e.TgZ(3,"div",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.getSelectedRentPeriod(null==a.equipment?null:a.equipment.id,null==a.equipment?null:a.equipment.maximumDays)}),e._uU(4),e.ALo(5,"date"),e.ALo(6,"date"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.AsE(" ",e.xi3(5,2,t.selectedRentPeriod.start_date,"dd.MM.yyyy")," - ",e.xi3(6,5,t.selectedRentPeriod.end_date,"dd.MM.yyyy")," ")}}function ce(n,o){if(1&n&&(e.TgZ(0,"div",6)(1,"div",9)(2,"div"),e._UZ(3,"img",21),e.qZA(),e.TgZ(4,"div")(5,"p",22),e._uU(6,"\u0411/\u0443 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435"),e.qZA(),e.TgZ(7,"p",11),e._uU(8),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(null==t.equipment?null:t.equipment.condition)}}function ue(n,o){1&n&&(e.TgZ(0,"div",6)(1,"div",9)(2,"div"),e._UZ(3,"img",23),e.qZA(),e.TgZ(4,"div"),e._uU(5,"\u041d\u043e\u0432\u043e\u0435"),e.qZA()()())}function pe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.getSelectedRentPeriod(null==a.equipment?null:a.equipment.id,null==a.equipment?null:a.equipment.maximumDays)}),e._uU(1," \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0435\u0440\u0438\u043e\u0434 \u0437\u0430\u044f\u0432\u043a\u0438 "),e.qZA()}}function ge(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.createOrder(a.selectedRentPeriod,null==a.equipment?null:a.equipment.id)}),e._uU(1," \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 "),e.qZA()}}let f=class{constructor(o,t,i,a,s){this.controller=o,this.route=t,this.cdr=i,this.mainPageHeaderService=a,this.notificationsService=s,this.dayCases=ne,this.selectedRentPeriod=null,this.defaultImage="./assets/img/no-photo.png"}ngOnInit(){this.controller.getCatalog(),this.controller.getEquipmentItemInfo(this.route.snapshot.params.id).subscribe(o=>{this.mainPageHeaderService.setPageTitle(o.name),this.equipment=o,this.setPhoto(o),this.cdr.markForCheck()})}getSelectedRentPeriod(o,t){this.controller.getRentPeriods(o,t).pipe((0,h.w)(i=>this.controller.addPersonalInfo(i)),(0,y.t)(this)).subscribe(i=>{this.selectedRentPeriod=i,this.cdr.markForCheck()})}createOrder(o,t){!t||this.hasUserPesonalData$.pipe((0,h.w)(i=>i?this.controller.orderEquipment(o,t):(0,p.of)(null)),(0,y.t)(this)).subscribe(i=>{i&&(this.notificationsService.openSuccess(ie.R.OrderSent),this.controller.openInfoModal(),this.selectedRentPeriod=null,this.cdr.markForCheck())})}setPhoto(o){this.controller.getPhotoById(o.photoID).subscribe(t=>{const a=(window.URL||window.webkitURL).createObjectURL(t);!this.image||(this.image.nativeElement.src=a)})}};f.\u0275fac=function(o){return new(o||f)(e.Y36(l),e.Y36(g.gz),e.Y36(e.sBO),e.Y36(T.I),e.Y36(oe.T))},f.\u0275cmp=e.Xpm({type:f,selectors:[["lc-equipment-item"]],viewQuery:function(o,t){if(1&o&&e.Gf(re,5),2&o){let i;e.iGM(i=e.CRH())&&(t.image=i.first)}},features:[e._Bn([l])],decls:34,vars:13,consts:[[1,"equipment-item"],[1,"equipment-item__title"],["alt","equipment photo",1,"equipment-item__img",3,"src"],["image",""],[1,"equipment-info-list"],[1,"equipment-info-list__item"],[1,"info-item"],["class","info-item__description",4,"ngIf"],["class","info-item__rent",4,"ngIf"],[1,"info-item__wrapper"],["src","assets/img/icons/icon-term.svg","alt","term"],[1,"info-item__condition"],["src","assets/img/icons/icon-compensation.svg","alt","compensation"],["class","info-item",4,"ngIf","ngIfElse"],["new",""],[1,"actions"],["mat-raised-button","","color","primary","class","equipment-item__calendar-btn",3,"click",4,"ngIf"],[1,"info-item__description"],[1,"info-item__rent"],[1,"info-item__rent-title"],[1,"info-item__rent-period",3,"click"],["src","assets/img/icons/icon-used.svg","alt","used"],[1,"info-item__used"],["src","assets/img/icons/icon-new.svg","alt","new"],["mat-raised-button","","color","primary",1,"equipment-item__calendar-btn",3,"click"]],template:function(o,t){if(1&o&&(e.TgZ(0,"section",0)(1,"h2",1),e._uU(2),e.qZA(),e._UZ(3,"img",2,3),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e.YNc(8,se,2,1,"p",7),e.YNc(9,le,7,8,"div",8),e.TgZ(10,"div",9)(11,"div"),e._UZ(12,"img",10),e.qZA(),e.TgZ(13,"div")(14,"p"),e._uU(15,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0440\u043e\u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f"),e.qZA(),e.TgZ(16,"p",11),e._uU(17),e.ALo(18,"numberDeclension"),e.qZA()()()(),e.TgZ(19,"div",6)(20,"div",9)(21,"div"),e._UZ(22,"img",12),e.qZA(),e.TgZ(23,"div")(24,"p"),e._uU(25,"\u041f\u043b\u0430\u0442\u0430 \u0437\u0430 \u043f\u043e\u0440\u0447\u0443 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f"),e.qZA(),e.TgZ(26,"p",11),e._uU(27),e.qZA()()()(),e.YNc(28,ce,9,1,"div",13),e.YNc(29,ue,6,0,"ng-template",null,14,e.W1O),e.qZA()(),e.TgZ(31,"div",15),e.YNc(32,pe,2,0,"button",16),e.YNc(33,ge,2,0,"button",16),e.qZA()()),2&o){const i=e.MAs(30);e.xp6(2),e.Oqu(null==t.equipment?null:t.equipment.title),e.xp6(1),e.Q6J("src",t.defaultImage,e.LSH),e.xp6(5),e.Q6J("ngIf",!t.selectedRentPeriod),e.xp6(1),e.Q6J("ngIf",t.selectedRentPeriod),e.xp6(8),e.Oqu(e.xi3(18,10,t.dayCases,null==t.equipment?null:t.equipment.maximumDays)),e.xp6(10),e.hij("",null==t.equipment?null:t.equipment.compensationCost," \u20bd"),e.xp6(1),e.Q6J("ngIf",!1===(null==t.equipment?null:t.equipment.technicalIssues))("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",!t.selectedRentPeriod),e.xp6(1),e.Q6J("ngIf",t.selectedRentPeriod)}},directives:[u.O5,P.lW],pipes:[u.uU,ae],styles:["[_nghost-%COMP%]{flex:1 1 auto;position:absolute;inset:103px 0 0}p[_ngcontent-%COMP%]{padding:0;margin:0}.equipment-item[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;background:#ffffff;border-radius:30px;height:100%;width:100%}.equipment-item__img[_ngcontent-%COMP%]{border-radius:10px;display:block;margin:0;width:300px;height:300px}.equipment-item__title[_ngcontent-%COMP%]{color:#005f75;font-size:18px;font-weight:700;line-height:20px;margin:15px 0}.equipment-item__calendar-btn[_ngcontent-%COMP%]{height:56px;padding:0 16px;border-radius:10px;text-transform:uppercase;letter-spacing:1.2px;margin:20px 0;width:300px}.equipment-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;bottom:0}.equipment-info-list[_ngcontent-%COMP%]{display:flex;overflow-y:auto;width:300px;margin-bottom:90px}.equipment-info-list__item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#b3b3b3;font-size:13px}.info-item__title[_ngcontent-%COMP%]{color:#005f75;display:inline-block;font-size:15px;font-weight:700;line-height:16px;margin:0 10px 10px 0}.info-item__description[_ngcontent-%COMP%]{flex-grow:3;color:#b3b3b3;font-size:14px;text-align:justify;margin-bottom:15px}.info-item__rent[_ngcontent-%COMP%]{display:flex;gap:4px;margin-bottom:15px;font-size:16px}.info-item__rent-title[_ngcontent-%COMP%]{color:#656565}.info-item__rent-period[_ngcontent-%COMP%]{color:#005f75;cursor:pointer}.info-item__wrapper[_ngcontent-%COMP%]{display:flex;gap:5px}.info-item__condition[_ngcontent-%COMP%]{color:#b3b3b3}.info-item__used[_ngcontent-%COMP%]{color:#f20e37}"],changeDetection:0}),(0,m.gn)([(0,d.Ph)(v.jq.hasUserPesonalData)],f.prototype,"hasUserPesonalData$",void 0),(0,m.gn)([(0,d.Ph)(v.jq.user)],f.prototype,"user",void 0),f=(0,m.gn)([y.c],f);let me=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["lc-category-item"]],inputs:{item:"item"},decls:6,vars:3,consts:[[1,"category-item"],[1,"category-item-link",3,"routerLink"],["alt","category photo",1,"category-item-img"],[1,"category-item-title"]],template:function(t,i){1&t&&(e.TgZ(0,"section",0)(1,"a",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"a",1)(4,"h2",3),e._uU(5),e.qZA()()()),2&t&&(e.xp6(1),e.MGl("routerLink","/catalog/categories/",null==i.item?null:i.item.id,""),e.xp6(2),e.MGl("routerLink","/catalog/categories/",null==i.item?null:i.item.id,""),e.xp6(2),e.Oqu(null==i.item?null:i.item.name))},directives:[g.yS],styles:["[_nghost-%COMP%]{flex:1 1 auto}.category-item[_ngcontent-%COMP%]{background:#ffffff;border-radius:30px;height:100%}.category-item-link[_ngcontent-%COMP%]{text-decoration:none}.category-item-img[_ngcontent-%COMP%]{border-radius:10px;display:block;margin:0;height:165px;width:100%;background:#F7F7F7;cursor:pointer}.category-item-title[_ngcontent-%COMP%]{color:#005f75;font-size:14px;font-weight:700;line-height:17px;letter-spacing:.25px;margin:12px 5px 25px;overflow:hidden;text-overflow:ellipsis;cursor:pointer}"],changeDetection:0}),n})();function de(n,o){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"lc-category-item",3),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("item",t)}}let fe=(()=>{class n{constructor(t,i){this.mainPageHeaderService=t,this.route=i,this.categories=[],t.setPageTitle("\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f")}ngOnInit(){this.categories=this.route.snapshot.data.activeCategories}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.I),e.Y36(g.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lc-categories"]],decls:3,vars:1,consts:[[1,"categories"],[1,"categories-list"],[4,"ngFor","ngForOf"],[3,"item"]],template:function(t,i){1&t&&(e.TgZ(0,"section",0)(1,"div",1),e.YNc(2,de,2,1,"div",2),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",i.categories))},directives:[u.sg,me],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column nowrap;flex:1 1 auto;margin:0 auto;max-width:900px}.categories[_ngcontent-%COMP%]{background:#ffffff;border-radius:30px;height:100%;padding:25px}.categories-list[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}"],changeDetection:0}),n})(),A=(()=>{class n{constructor(t){this.api=t}resolve(){return this.api.getCategoriesContainEquipment().pipe((0,w.U)(t=>t.items))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(M))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var he=r(138);const Ce=[{path:"",component:C,resolve:{activeCategories:A}},{path:he.$.Categories,resolve:{activeCategories:A},children:[{path:"",component:fe},{path:":categoryId",component:C}]},{path:"equipment/:id",component:f}];let _e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[A],imports:[[g.Bz.forChild(Ce)],g.Bz]}),n})();var xe=r(4466),ye=r(9868),ve=r(3602);let qe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[M],imports:[[u.ez,_e,xe.m,ve.x,ye.q,d.$l.forFeature([c])]]}),n})()}}]);