import{a as Ee}from"./chunk-7DQC5E6J.js";import{$ as P,$c as Ie,A as x,B as v,E as $,H as Q,Ib as E,J as a,K as f,Ka as _e,Kb as X,Kc as c,La as Z,Lb as j,N as C,Na as D,O as s,P as se,Q as o,Qa as R,R as r,Ra as ee,Rb as te,S as d,T as ce,U as pe,Ua as he,V as q,W as _,X as u,Y as T,Z as W,_ as w,_c as qe,aa as b,ba as O,ca as m,cc as ye,da as h,ea as L,f as S,fa as ue,fc as xe,g as re,ga as I,i as ae,ma as M,na as Y,oa as U,p as K,pa as z,qa as de,t as le,ta as k,u as A,ua as N,va as ge,w as me,wa as fe,xa as Ce,xc as ve,y as g,z as B}from"./chunk-LUI5EWE7.js";var Re=["image"],we=(()=>{class i{constructor(e){this.controller=e,this.defaultImage="./assets/img/no-photo.png",this.equipmentPath=`/${E.Catalog}/${E.EquipMent}/`}ngOnInit(){this.controller.getPhotoById(this.equipment.photoID).subscribe(e=>{let n=(window.URL||window.webkitURL).createObjectURL(e);this.image&&(this.image.nativeElement.src=n)})}static{this.\u0275fac=function(t){return new(t||i)(f(c))}}static{this.\u0275cmp=g({type:i,selectors:[["lc-preview-equipment-card"]],viewQuery:function(t,n){if(t&1&&w(Re,5),t&2){let p;P(p=b())&&(n.image=p.first)}},inputs:{equipment:"equipment"},features:[I([c])],decls:8,vars:9,consts:[["image",""],[1,"equipment-card"],[1,"equipment-card__img",3,"routerLink"],["alt","equipment photo",1,"img",3,"src"],[1,"equipment-card__title",3,"routerLink"],[1,"equipment-card__info"]],template:function(t,n){t&1&&(o(0,"div",1)(1,"a",2),d(2,"img",3,0),r(),o(4,"a",4),m(5),r(),o(6,"p",5),m(7),r()()),t&2&&(a(),W("routerLink","",n.equipmentPath,"",n.equipment.id,""),a(),s("src",n.defaultImage,Q),a(2),W("routerLink","",n.equipmentPath,"",n.equipment.id,""),a(),L(" ",n.equipment.name," "),a(2),h(n.equipment.description))},dependencies:[R],styles:["[_nghost-%COMP%]{display:flex;height:100%}.equipment-card[_ngcontent-%COMP%]{align-items:flex-start;display:flex;flex-flow:column nowrap;justify-content:flex-start;width:100%}.equipment-card__img[_ngcontent-%COMP%]{border-radius:10px;display:block;min-height:160px;width:100%}.equipment-card__img[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{border-radius:10px;display:block;margin:0;width:100%}.equipment-card__title[_ngcontent-%COMP%]{color:#005f75;font-size:14px;font-weight:700;line-height:15px;margin:10px 5px 5px;text-decoration:none}.equipment-card__info[_ngcontent-%COMP%]{color:#b3b3b3;flex:1 1 auto;font-size:13px;line-height:15px;margin:0 5px 10px}"],changeDetection:0})}}return i})();var Pe=(()=>{class i{constructor(){this.categorySelected=new $}get categoryId(){return this.item?.id||0}selectCategory(e){this.categorySelected.next(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=g({type:i,selectors:[["lc-category-tab"]],inputs:{item:"item"},outputs:{categorySelected:"categorySelected"},decls:2,vars:1,consts:[["routerLink","./",1,"category-equipment-button",3,"click"]],template:function(t,n){t&1&&(o(0,"a",0),_("click",function(){return n.selectCategory(n.categoryId)}),m(1),r()),t&2&&(a(),h(n.item==null?null:n.item.name))},dependencies:[R],styles:["[_nghost-%COMP%]{flex:1 1 auto}.category-equipment-button[_ngcontent-%COMP%]{display:flex;align-items:center;color:#fff;background:transparent;border:none;border-radius:6px;row-gap:10px;height:35px;font-size:14px;font-weight:400;line-height:20px;padding:6px 12px;width:fit-content;white-space:nowrap;cursor:pointer;text-decoration:none}"],changeDetection:0})}}return i})();var Le=["listCategories"],je=["categoryElement"];function Ve(i,l){if(i&1){let e=q();o(0,"div",6,2),_("click",function(){let n=x(e).$implicit,p=O(1),De=u();return v(De.scrollCategories(n.id,p))}),d(2,"lc-category-tab",7),r()}if(i&2){let e=l.$implicit,t=u();se("active",t.selectedCategoryId===e.id),T("id",e.id),a(2),s("item",e)}}var be=(()=>{class i{constructor(e,t){this.route=e,this.controller=t,this.categories=[],this.selectedCategoryId=0,this.marginLeft=25}ngOnInit(){this.selectedCategoryId=this.controller.selectedCategoryId,this.categories=[ye,...this.route.snapshot.data.activeCategories]}ngAfterViewInit(){if(!this.categoriesElements)return;let e=this.categoriesElements.find(n=>n.nativeElement.classList.contains("active"));if(!e)return;let t=e.nativeElement.getBoundingClientRect().x;this.scroll(t)}scrollCategories(e,t){if(this.selectedCategoryId=e,this.controller.selectedCategoryId=e,this.controller.filterEquipment(),!this.listCategories)return;let n=t.getBoundingClientRect().x,p=this.listCategories.nativeElement.scrollLeft+n;this.scroll(p)}scroll(e){this.listCategories&&this.listCategories.nativeElement.scroll({left:e-this.marginLeft,behavior:"smooth"})}static{this.\u0275fac=function(t){return new(t||i)(f(D),f(c))}}static{this.\u0275cmp=g({type:i,selectors:[["lc-category-set"]],viewQuery:function(t,n){if(t&1&&(w(Le,5),w(je,5)),t&2){let p;P(p=b())&&(n.listCategories=p.first),P(p=b())&&(n.categoriesElements=p)}},decls:5,vars:1,consts:[["listCategories",""],["list",""],["categoryElement",""],[1,"category-equipment"],[1,"category-equipment-list"],["class","category-equipment-item",3,"active","id","click",4,"ngFor","ngForOf"],[1,"category-equipment-item",3,"click","id"],[3,"item"]],template:function(t,n){t&1&&(o(0,"section",3,0)(2,"div",4,1),C(4,Ve,3,4,"div",5),r()()),t&2&&(a(4),s("ngForOf",n.categories))},dependencies:[k,Pe],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column nowrap;flex:1 1 auto;overflow-x:hidden}.category-equipment[_ngcontent-%COMP%]{display:flex;height:100%;padding:25px;overflow-x:scroll;scroll-snap-type:x mandatory}.category-equipment-list[_ngcontent-%COMP%]{display:flex;gap:10px}.category-equipment-item[_ngcontent-%COMP%]{background:#4d8f9e;border-radius:6px}.active[_ngcontent-%COMP%]{background:#005f75}[_ngcontent-%COMP%]::-webkit-scrollbar{height:0px}@media (min-width: 890px){.category-equipment-list[_ngcontent-%COMP%]{flex-wrap:wrap}}"],changeDetection:0})}}return i})();function Be(i,l){if(i&1&&(o(0,"div"),d(1,"lc-preview-equipment-card",6),r()),i&2){let e=l.$implicit;a(),s("equipment",e)}}function $e(i,l){if(i&1&&(o(0,"div",4),C(1,Be,2,1,"div",5),M(2,"async"),r()),i&2){let e=u(2);a(),s("ngForOf",Y(2,1,e.catalog$))}}function Qe(i,l){if(i&1&&(ce(0),C(1,$e,3,3,"div",3),pe()),i&2){let e=l.ngIf;u();let t=O(5);a(),s("ngIf",e.length>0)("ngIfElse",t)}}function Ue(i,l){if(i&1&&(o(0,"section",7),m(1),r()),i&2){let e=u();a(),h(e.noResultMessage)}}var H=class ne{constructor(l){this.controller=l,this.catalog$=this.controller.catalog$,this.noResultMessage="\u0418\u0437\u0432\u0438\u043D\u0438\u0442\u0435, \u043F\u043E \u0432\u0430\u0448\u0435\u043C\u0443 \u0437\u0430\u043F\u0440\u043E\u0441\u0443 \u043D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043A\u0440\u0438\u0442\u0435\u0440\u0438\u0438 \u0437\u0430\u043F\u0440\u043E\u0441\u0430.",this.controller.setPageTitle("\u041A\u0430\u0442\u0430\u043B\u043E\u0433")}ngOnInit(){this.controller.filterEquipment(),this.controller.displayCatalogActions(!0),this.controller.equipmentFilter$.pipe(j(this)).subscribe(()=>{this.controller.filterEquipment()})}ngOnDestroy(){this.controller.displayCatalogActions(!1),this.controller.displayPageTitle(!0)}static{this.\u0275fac=function(e){return new(e||ne)(f(c))}}static{this.\u0275cmp=g({type:ne,selectors:[["lc-catalog"]],features:[I([c])],decls:6,vars:3,consts:[["noResult",""],[1,"catalog"],[4,"ngIf"],["class","catalog-list",4,"ngIf","ngIfElse"],[1,"catalog-list"],[4,"ngFor","ngForOf"],[3,"equipment"],[1,"no-result"]],template:function(e,t){e&1&&(d(0,"lc-category-set"),o(1,"section",1),C(2,Qe,2,2,"ng-container",2),M(3,"async"),C(4,Ue,2,1,"ng-template",null,0,z),r()),e&2&&(a(2),s("ngIf",Y(3,1,t.catalog$)))},dependencies:[k,N,we,be,ge],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column nowrap;flex:1 1 auto}.catalog[_ngcontent-%COMP%]{background:#fff;border-radius:30px;height:100%;padding:28px}.catalog-list[_ngcontent-%COMP%]{display:grid;grid-gap:20px;grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}.no-result[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0})}};H=S([X],H);var Me={nominativeSingular:"\u0434\u0435\u043D\u044C",genitiveSingular:"\u0434\u043D\u044F",genitivePlural:"\u0434\u043D\u0435\u0439"};var ze=["image"];function Ne(i,l){if(i&1&&(o(0,"p",17),m(1),r()),i&2){let e=u();a(),L(" ",e.equipment==null?null:e.equipment.description," ")}}function Xe(i,l){if(i&1){let e=q();o(0,"div",18)(1,"p",19),m(2,"\u041F\u0435\u0440\u0438\u043E\u0434 \u0430\u0440\u0435\u043D\u0434\u044B:"),r(),o(3,"div",20),_("click",function(){x(e);let n=u();return v(n.getSelectedRentPeriod(n.equipment==null?null:n.equipment.id,n.equipment==null?null:n.equipment.maximumDays))}),m(4),M(5,"date"),M(6,"date"),r()()}if(i&2){let e=u();a(4),ue(" ",U(5,2,e.selectedRentPeriod.start_date,"dd.MM.yyyy")," - ",U(6,5,e.selectedRentPeriod.end_date,"dd.MM.yyyy")," ")}}function Ge(i,l){if(i&1&&(o(0,"div",7)(1,"div",10)(2,"div"),d(3,"img",21),r(),o(4,"div")(5,"p",22),m(6,"\u0411/\u0443 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435"),r(),o(7,"p",12),m(8),r()()()()),i&2){let e=u();a(8),h(e.equipment==null?null:e.equipment.condition)}}function He(i,l){i&1&&(o(0,"div",7)(1,"div",10)(2,"div"),d(3,"img",23),r(),o(4,"div"),m(5,"\u041D\u043E\u0432\u043E\u0435"),r()()())}function Je(i,l){if(i&1){let e=q();o(0,"button",24),_("click",function(){x(e);let n=u();return v(n.getSelectedRentPeriod(n.equipment==null?null:n.equipment.id,n.equipment==null?null:n.equipment.maximumDays))}),m(1," \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0438\u043E\u0434 \u0437\u0430\u044F\u0432\u043A\u0438 "),r()}}function Ke(i,l){if(i&1){let e=q();o(0,"button",24),_("click",function(){x(e);let n=u();return v(n.createOrder(n.selectedRentPeriod,n.equipment==null?null:n.equipment.id))}),m(1," \u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443 "),r()}}var F=class oe{constructor(l,e,t){this.controller=l,this.route=e,this.cdr=t,this.dayCases=Me,this.selectedRentPeriod=null,this.defaultImage="./assets/img/no-photo.png"}ngOnInit(){this.controller.getCatalog(),this.controller.getEquipmentItemInfo(this.route.snapshot.params.id).subscribe(l=>{this.controller.setPageTitle(l.name),this.equipment=l,this.setPhoto(l),this.cdr.markForCheck()})}getSelectedRentPeriod(l,e){this.controller.getRentPeriods(l,e).pipe(K(t=>this.controller.addPersonalInfo(t)),j(this)).subscribe(t=>{this.selectedRentPeriod=t,this.cdr.markForCheck()})}createOrder(l,e){e&&this.hasUserPesonalData$.pipe(K(t=>t?this.controller.orderEquipment(l,e):re(null)),j(this)).subscribe(t=>{t&&(this.controller.openInfoModal(),this.selectedRentPeriod=null,this.cdr.markForCheck())})}setPhoto(l){this.controller.getPhotoById(l.photoID).subscribe(e=>{let n=(window.URL||window.webkitURL).createObjectURL(e);this.image&&(this.image.nativeElement.src=n)})}static{this.\u0275fac=function(e){return new(e||oe)(f(c),f(D),f(de))}}static{this.\u0275cmp=g({type:oe,selectors:[["lc-equipment-item"]],viewQuery:function(e,t){if(e&1&&w(ze,5),e&2){let n;P(n=b())&&(t.image=n.first)}},features:[I([c])],decls:34,vars:13,consts:[["image",""],["new",""],[1,"equipment-item"],[1,"equipment-item__title"],["alt","equipment photo",1,"equipment-item__img",3,"src"],[1,"equipment-info-list"],[1,"equipment-info-list__item"],[1,"info-item"],["class","info-item__description",4,"ngIf"],["class","info-item__rent",4,"ngIf"],[1,"info-item__wrapper"],["src","assets/img/icons/icon-term.svg","alt","term"],[1,"info-item__condition"],["src","assets/img/icons/icon-compensation.svg","alt","compensation"],["class","info-item",4,"ngIf","ngIfElse"],[1,"actions"],["mat-raised-button","","color","primary","class","equipment-item__calendar-btn",3,"click",4,"ngIf"],[1,"info-item__description"],[1,"info-item__rent"],[1,"info-item__rent-title"],[1,"info-item__rent-period",3,"click"],["src","assets/img/icons/icon-used.svg","alt","used"],[1,"info-item__used"],["src","assets/img/icons/icon-new.svg","alt","new"],["mat-raised-button","","color","primary",1,"equipment-item__calendar-btn",3,"click"]],template:function(e,t){if(e&1&&(o(0,"section",2)(1,"h2",3),m(2),r(),d(3,"img",4,0),o(5,"div",5)(6,"div",6)(7,"div",7),C(8,Ne,2,1,"p",8)(9,Xe,7,8,"div",9),o(10,"div",10)(11,"div"),d(12,"img",11),r(),o(13,"div")(14,"p"),m(15,"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0441\u0440\u043E\u043A \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F"),r(),o(16,"p",12),m(17),M(18,"numberDeclension"),r()()()(),o(19,"div",7)(20,"div",10)(21,"div"),d(22,"img",13),r(),o(23,"div")(24,"p"),m(25,"\u041F\u043B\u0430\u0442\u0430 \u0437\u0430 \u043F\u043E\u0440\u0447\u0443 \u043E\u0431\u043E\u0440\u0443\u0434\u043E\u0432\u0430\u043D\u0438\u044F"),r(),o(26,"p",12),m(27),r()()()(),C(28,Ge,9,1,"div",14)(29,He,6,0,"ng-template",null,1,z),r()(),o(31,"div",15),C(32,Je,2,0,"button",16)(33,Ke,2,0,"button",16),r()()),e&2){let n=O(30);a(2),h(t.equipment==null?null:t.equipment.title),a(),s("src",t.defaultImage,Q),a(5),s("ngIf",!t.selectedRentPeriod),a(),s("ngIf",t.selectedRentPeriod),a(8),h(U(18,10,t.dayCases,t.equipment==null?null:t.equipment.maximumDays)),a(10),L("",t.equipment==null?null:t.equipment.compensationCost," \u20BD"),a(),s("ngIf",(t.equipment==null?null:t.equipment.technicalIssues)===!1)("ngIfElse",n),a(4),s("ngIf",!t.selectedRentPeriod),a(),s("ngIf",t.selectedRentPeriod)}},dependencies:[N,he,fe,qe],styles:["[_nghost-%COMP%]{flex:1 1 auto;position:absolute;inset:103px 0 0}p[_ngcontent-%COMP%]{padding:0;margin:0}.equipment-item[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;background:#fff;border-radius:30px;height:100%;width:100%}.equipment-item__img[_ngcontent-%COMP%]{border-radius:10px;display:block;margin:0;width:300px;height:300px}.equipment-item__title[_ngcontent-%COMP%]{color:#005f75;font-size:18px;font-weight:700;line-height:20px;margin:15px 0}.equipment-item__calendar-btn[_ngcontent-%COMP%]{height:56px;padding:0 16px;border-radius:10px;text-transform:uppercase;letter-spacing:1.2px;margin:20px 0;width:300px}.equipment-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;bottom:0}.equipment-info-list[_ngcontent-%COMP%]{display:flex;overflow-y:auto;width:300px;margin-bottom:90px}.equipment-info-list__item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#b3b3b3;font-size:13px}.info-item__title[_ngcontent-%COMP%]{color:#005f75;display:inline-block;font-size:15px;font-weight:700;line-height:16px;margin:0 10px 10px 0}.info-item__description[_ngcontent-%COMP%]{flex-grow:3;color:#b3b3b3;font-size:14px;text-align:justify;margin-bottom:15px}.info-item__rent[_ngcontent-%COMP%]{display:flex;gap:4px;margin-bottom:15px;font-size:16px}.info-item__rent-title[_ngcontent-%COMP%]{color:#656565}.info-item__rent-period[_ngcontent-%COMP%]{color:#005f75;cursor:pointer}.info-item__wrapper[_ngcontent-%COMP%]{display:flex;gap:5px}.info-item__condition[_ngcontent-%COMP%]{color:#b3b3b3}.info-item__used[_ngcontent-%COMP%]{color:#de3730}"],changeDetection:0})}};S([Z(te.hasUserPesonalData)],F.prototype,"hasUserPesonalData$",void 0);S([Z(te.user)],F.prototype,"user",void 0);F=S([X],F);var Se=(()=>{class i{constructor(){this.categorySelected=new $,this.catalogPath=`/${E.Catalog}`}get categoryId(){return this.item?.id||0}selectCategory(e){this.categorySelected.next(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=g({type:i,selectors:[["lc-category-item"]],inputs:{item:"item"},outputs:{categorySelected:"categorySelected"},decls:6,vars:3,consts:[[1,"category-item"],[1,"category-item-link",3,"click","routerLink"],["alt","category photo",1,"category-item-img"],[1,"category-item-title"]],template:function(t,n){t&1&&(o(0,"section",0)(1,"a",1),_("click",function(){return n.selectCategory(n.categoryId)}),d(2,"img",2),r(),o(3,"a",1),_("click",function(){return n.selectCategory(n.categoryId)}),o(4,"h2",3),m(5),r()()()),t&2&&(a(),T("routerLink",n.catalogPath),a(2),T("routerLink",n.catalogPath),a(2),h(n.item==null?null:n.item.name))},dependencies:[R],styles:["[_nghost-%COMP%]{flex:1 1 auto}.category-item[_ngcontent-%COMP%]{background:#fff;border-radius:30px;height:100%}.category-item-link[_ngcontent-%COMP%]{text-decoration:none}.category-item-img[_ngcontent-%COMP%]{border-radius:10px;display:block;margin:0;height:165px;width:100%;background:#f7f7f7;cursor:pointer}.category-item-title[_ngcontent-%COMP%]{color:#005f75;font-size:14px;font-weight:700;line-height:17px;letter-spacing:.25px;margin:12px 5px 25px;overflow:hidden;text-overflow:ellipsis;cursor:pointer}"],changeDetection:0})}}return i})();function Ye(i,l){if(i&1){let e=q();o(0,"div")(1,"lc-category-item",3),_("categorySelected",function(n){x(e);let p=u();return v(p.selectCategory(n))}),r()()}if(i&2){let e=l.$implicit;a(),s("item",e)}}var Oe=(()=>{class i{constructor(e,t){this.route=e,this.controller=t,this.categories=[]}ngOnInit(){this.controller.setPageTitle("\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 \u043E\u0431\u043E\u0440\u0443\u0434\u043E\u0432\u0430\u043D\u0438\u044F"),this.categories=this.route.snapshot.data.activeCategories}selectCategory(e){this.controller.selectedCategoryId=e}static{this.\u0275fac=function(t){return new(t||i)(f(D),f(c))}}static{this.\u0275cmp=g({type:i,selectors:[["lc-categories"]],features:[I([c])],decls:3,vars:1,consts:[[1,"categories"],[1,"categories-list"],[4,"ngFor","ngForOf"],[3,"categorySelected","item"]],template:function(t,n){t&1&&(o(0,"section",0)(1,"div",1),C(2,Ye,2,1,"div",2),r()()),t&2&&(a(2),s("ngForOf",n.categories))},dependencies:[k,Se],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column nowrap;flex:1 1 auto;margin:0 auto;max-width:900px}.categories[_ngcontent-%COMP%]{background:#fff;border-radius:30px;height:100%;padding:25px}.categories-list[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}"],changeDetection:0})}}return i})();var J=(()=>{class i{constructor(e){this.api=e}resolve(){return this.api.getCategoriesContainEquipment().pipe(ae(e=>e.items))}static{this.\u0275fac=function(t){return new(t||i)(me(ve))}}static{this.\u0275prov=le({token:i,factory:i.\u0275fac})}}return i})();var Ze=[{path:"",component:H,resolve:{activeCategories:J}},{path:E.Categories,component:Oe,resolve:{activeCategories:J}},{path:`${E.EquipMent}/:id`,component:F}],ke=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=B({type:i})}static{this.\u0275inj=A({providers:[J],imports:[ee.forChild(Ze),ee]})}}return i})();var di=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=B({type:i})}static{this.\u0275inj=A({imports:[Ce,ke,Ie,Ee,_e.forFeature([xe])]})}}return i})();export{di as CatalogModule};
