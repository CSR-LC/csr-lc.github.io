"use strict";(self.webpackChunklc_fe=self.webpackChunklc_fe||[]).push([[617],{2617:(D,f,a)=>{a.r(f),a.d(f,{CatalogModule:()=>B});var h=a(9808),m=a(5089),C=a(520),t=a(5e3);let q=(()=>{class n{constructor(e){this.httpClient=e}info(e){return this.httpClient.get(`/api/equipment/${e}`)}getCatalog(){const e=(new C.LE).set("limit",1e3);return this.httpClient.get("/api/equipment",{params:e})}searchEquipment(e){return this.httpClient.post("/api/equipment/search",e)}getPhotoById(e){return this.httpClient.get(`api/equipment/photos/${e}`,{responseType:"arraybuffer"})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(C.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var g=a(655),p=a(131),_=a(4004);let v=(()=>{class n{constructor(e){this.catalog=e}}return n.type="[Catalog] Get",n})(),l=class{constructor(){}static catalog(o){return o.equipments}getCatalogAction(o,e){o.setState({equipments:e.catalog})}};l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac}),(0,g.gn)([(0,p.aU)(v)],l.prototype,"getCatalogAction",null),(0,g.gn)([(0,p.Qf)()],l,"catalog",null),l=(0,g.gn)([(0,p.ZM)({name:"catalog",defaults:{equipments:[]}})],l);class r{constructor(o,e){this.api=o,this.store=e}getCatalog(){this.api.getCatalog().subscribe(o=>{this.store.dispatch(new v(o.items))})}getEquipmentItemInfo(o){return this.api.info(o)}searchEquipment(o){return this.api.searchEquipment({name_substring:o}).pipe((0,_.U)(i=>i.items))}getPhotoById(o){return this.api.getPhotoById(o).pipe((0,_.U)(e=>new Blob([e],{type:"image/jpeg"})))}}r.\u0275fac=function(o){return new(o||r)(t.LFG(q),t.LFG(p.yh))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),(0,g.gn)([(0,p.Ph)(l.catalog)],r.prototype,"catalog$",void 0);var y=a(9965),d=a(7322),Z=a(7531),E=a(7423),x=a(5245);let A=(()=>{class n{constructor(){this.onSearchEmit=new t.vpe}onSearch(e){this.onSearchEmit.emit(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["lc-catalog-search"]],outputs:{onSearchEmit:"onSearch"},decls:9,vars:0,consts:[[1,"search-form"],["appearance","outline"],["matInput","","type","text","maxlength","100","placeholder","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443",3,"keydown.enter"],["searchBox",""],["matSuffix","","type","button","mat-icon-button","",3,"click"]],template:function(e,i){if(1&e){const u=t.EpF();t.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443"),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("keydown.enter",function(s){t.CHM(u);const k=t.MAs(5);return i.onSearch(k.value),s.preventDefault()}),t.qZA(),t.TgZ(6,"button",4),t.NdJ("click",function(){t.CHM(u);const s=t.MAs(5);return i.onSearch(s.value)}),t.TgZ(7,"mat-icon"),t._uU(8,"search"),t.qZA()()()()}},directives:[d.KE,d.hX,Z.Nt,E.lW,d.R9,x.Hw],styles:["[_nghost-%COMP%]{display:block}.search-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin:20px 0;width:100%}"]}),n})();const T=["image"];let M=(()=>{class n{constructor(e){this.controller=e,this.defaultImage="./assets/img/no-photo.png"}ngOnInit(){this.controller.getPhotoById(this.equipment.photoID).subscribe(e=>{const u=(window.URL||window.webkitURL).createObjectURL(e);!this.image||(this.image.nativeElement.src=u)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r))},n.\u0275cmp=t.Xpm({type:n,selectors:[["lc-preview-equipment-card"]],viewQuery:function(e,i){if(1&e&&t.Gf(T,5),2&e){let u;t.iGM(u=t.CRH())&&(i.image=u.first)}},inputs:{equipment:"equipment"},features:[t._Bn([r])],decls:8,vars:5,consts:[[1,"equipment-card"],[1,"equipment-card__img",3,"routerLink"],["alt","equipment photo",1,"img",3,"src"],["image",""],[1,"equipment-card__title",3,"routerLink"],[1,"equipment-card__info"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"a",1),t._UZ(2,"img",2,3),t.qZA(),t.TgZ(4,"a",4),t._uU(5),t.qZA(),t.TgZ(6,"p",5),t._uU(7),t.qZA()()),2&e&&(t.xp6(1),t.MGl("routerLink","/catalog/",i.equipment.id,""),t.xp6(1),t.Q6J("src",i.defaultImage,t.LSH),t.xp6(2),t.MGl("routerLink","/catalog/",i.equipment.id,""),t.xp6(1),t.hij(" ",i.equipment.name," "),t.xp6(2),t.Oqu(i.equipment.description))},directives:[m.yS],styles:["[_nghost-%COMP%]{display:flex;height:100%}.equipment-card[_ngcontent-%COMP%]{align-items:flex-start;display:flex;flex-flow:column nowrap;justify-content:flex-start;width:100%}.equipment-card__img[_ngcontent-%COMP%]{border-radius:10px;display:block;min-height:160px;width:100%}.equipment-card__img[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{border-radius:10px;display:block;margin:0;width:100%}.equipment-card__title[_ngcontent-%COMP%]{color:#005f75;font-size:14px;font-weight:700;line-height:15px;margin:10px 5px 5px;text-decoration:none}.equipment-card__info[_ngcontent-%COMP%]{color:#b3b3b3;flex:1 1 auto;font-size:13px;line-height:15px;margin:0 5px 10px}"],changeDetection:0}),n})();function w(n,o){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"lc-preview-equipment-card",4),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("equipment",e)}}let P=(()=>{class n{constructor(e,i){this.controller=e,this.mainPageHeaderService=i,this.catalog$=this.controller.catalog$,i.setPageTitle("\u041a\u0430\u0442\u0430\u043b\u043e\u0433")}ngOnInit(){this.controller.getCatalog()}onSearch(e){this.catalog$=this.controller.searchEquipment(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r),t.Y36(y.I))},n.\u0275cmp=t.Xpm({type:n,selectors:[["lc-catalog"]],features:[t._Bn([r])],decls:5,vars:3,consts:[[1,"catalog"],[3,"onSearch"],[1,"catalog-list"],[4,"ngFor","ngForOf"],[3,"equipment"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0)(1,"lc-catalog-search",1),t.NdJ("onSearch",function(c){return i.onSearch(c)}),t.qZA(),t.TgZ(2,"div",2),t.YNc(3,w,2,1,"div",3),t.ALo(4,"async"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,1,i.catalog$)))},directives:[A,h.sg,M],pipes:[h.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column nowrap;flex:1 1 auto}.catalog[_ngcontent-%COMP%]{background:#ffffff;border-radius:30px;height:100%;padding:28px}.catalog-list[_ngcontent-%COMP%]{display:grid;grid-gap:20px;grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}"],changeDetection:0}),n})();var b=a(9772);const O=["image"],S=[{path:"",component:P},{path:":id",component:(()=>{class n{constructor(e,i,u,c){this.controller=e,this.route=i,this.cdr=u,this.mainPageHeaderService=c,this.catalog$=this.controller.catalog$,this.defaultImage="./assets/img/no-photo.png"}ngOnInit(){this.controller.getCatalog(),this.controller.getEquipmentItemInfo(this.route.snapshot.params.id).subscribe(e=>{this.mainPageHeaderService.setPageTitle(e.name),this.equipment=e,this.setPhoto(e),this.cdr.markForCheck()})}setPhoto(e){this.controller.getPhotoById(e.photoID).subscribe(i=>{const c=(window.URL||window.webkitURL).createObjectURL(i);!this.image||(this.image.nativeElement.src=c)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r),t.Y36(m.gz),t.Y36(t.sBO),t.Y36(y.I))},n.\u0275cmp=t.Xpm({type:n,selectors:[["lc-equipment-item"]],viewQuery:function(e,i){if(1&e&&t.Gf(O,5),2&e){let u;t.iGM(u=t.CRH())&&(i.image=u.first)}},features:[t._Bn([r])],decls:42,vars:7,consts:[[1,"equipment-item"],["alt","equipment photo",1,"equipment-item__img",3,"src"],["image",""],[1,"equipment-item__title"],[1,"equipment-item__description"],[1,"equipment-info-list"],[1,"equipment-info-list__item"],[1,"info-item"],[1,"info-item__title"],["mat-icon-button","","mat-raised-button","","matTooltip","\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0440\u043e\u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f, \u0434\u043d\u0435\u0439","matTooltipPosition","right",3,"click"],["tooltip","matTooltip"],["mat-icon-button","","mat-raised-button","","matTooltip","\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0435\u0434\u0438\u043d\u0438\u0446 \u0432 \u0440\u0443\u043a\u0438","matTooltipPosition","right",3,"click"],["tooltip1","matTooltip"],["mat-icon-button","","mat-raised-button","","matTooltip","\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043a\u043e\u043c\u043f\u0435\u043d\u0441\u0430\u0446\u0438\u0438 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u0443\u0442\u0440\u0430\u0442\u044b/\u043f\u043e\u0440\u0447\u0438, \u0440\u0443\u0431.","matTooltipPosition","right",3,"click"],["tooltip2","matTooltip"]],template:function(e,i){if(1&e){const u=t.EpF();t.TgZ(0,"section",0),t._UZ(1,"img",1,2),t.TgZ(3,"h2",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"h3",8),t._uU(11,"\u0421\u0440\u043e\u043a"),t.qZA(),t.TgZ(12,"button",9,10),t.NdJ("click",function(){return t.CHM(u),t.MAs(13).show()}),t.TgZ(14,"mat-icon"),t._uU(15,"help_outline"),t.qZA()(),t.TgZ(16,"div"),t._uU(17),t.qZA()(),t.TgZ(18,"div",7)(19,"h3",8),t._uU(20,"\u0412 \u0440\u0443\u043a\u0438"),t.qZA(),t.TgZ(21,"button",11,12),t.NdJ("click",function(){return t.CHM(u),t.MAs(22).show()}),t.TgZ(23,"mat-icon"),t._uU(24,"help_outline"),t.qZA()(),t.TgZ(25,"div"),t._uU(26),t.qZA()(),t.TgZ(27,"div",7)(28,"h3",8),t._uU(29,"\u041a\u043e\u043c\u043f\u0435\u043d\u0441\u0430\u0446\u0438\u044f"),t.qZA(),t.TgZ(30,"button",13,14),t.NdJ("click",function(){return t.CHM(u),t.MAs(31).show()}),t.TgZ(32,"mat-icon"),t._uU(33,"help_outline"),t.qZA()(),t.TgZ(34,"div"),t._uU(35),t.qZA()()(),t.TgZ(36,"div",6)(37,"div",7)(38,"h3",8),t._uU(39,"\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435"),t.qZA(),t.TgZ(40,"div"),t._uU(41),t.qZA()()()()()}2&e&&(t.xp6(1),t.Q6J("src",i.defaultImage,t.LSH),t.xp6(3),t.Oqu(null==i.equipment?null:i.equipment.title),t.xp6(2),t.hij(" ",null==i.equipment?null:i.equipment.description," "),t.xp6(11),t.hij("\u0414\u043e ",null==i.equipment?null:i.equipment.maximumDays," \u0441\u0443\u0442\u043e\u043a"),t.xp6(9),t.hij("\u0414\u043e ",null==i.equipment?null:i.equipment.maximumAmount," \u0448\u0442."),t.xp6(9),t.hij("",null==i.equipment?null:i.equipment.compensationCost," \u20bd"),t.xp6(6),t.Oqu(null==i.equipment?null:i.equipment.condition))},directives:[E.lW,b.gM,x.Hw],styles:["[_nghost-%COMP%]{flex:1 1 auto}.equipment-item[_ngcontent-%COMP%]{background:#ffffff;border-radius:30px;height:100%;padding:28px}.equipment-item__img[_ngcontent-%COMP%]{border-radius:10px;display:block;margin:0;max-width:400px;width:100%}.equipment-item__title[_ngcontent-%COMP%]{color:#005f75;font-size:18px;font-weight:700;line-height:20px;margin:28px 0}.equipment-item__description[_ngcontent-%COMP%]{color:#b3b3b3;font-size:16px;line-height:18px;margin:28px 0}.equipment-info-list[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap}.equipment-info-list__item[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.equipment-info-list__item[_ngcontent-%COMP%]:not(:last-child){margin:0 0 28px}.info-item[_ngcontent-%COMP%]{color:#b3b3b3;font-size:13px;line-height:15px}.info-item[_ngcontent-%COMP%]:not(:last-child){margin-right:28px}.info-item__title[_ngcontent-%COMP%]{color:#005f75;display:inline-block;font-size:15px;font-weight:700;line-height:16px;margin:0 10px 10px 0}"],changeDetection:0}),n})()}];let F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(S)],m.Bz]}),n})();var I=a(4466),U=a(7137);let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[q],imports:[[h.ez,F,I.m,U.q,p.$l.forFeature([l])]]}),n})()}}]);